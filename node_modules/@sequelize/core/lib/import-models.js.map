{
  "version": 3,
  "sources": ["../src/import-models.ts"],
  "sourcesContent": ["import { pathToFileURL } from 'node:url';\nimport glob from 'fast-glob';\nimport uniq from 'lodash/uniq';\nimport type { ModelStatic } from './model.js';\nimport { isModelStatic } from './utils/model-utils.js';\n\ntype ModelMatch = (path: string, exportName: string, exportValue: ModelStatic) => boolean;\n\n/**\n * Imports all model classes exported in the file matching the specified globs.\n * Useful when setting the {@link Options.models} option in the Sequelize constructor.\n *\n * @param globPaths\n * @param modelMatch\n */\nexport async function importModels(globPaths: string | string[], modelMatch?: ModelMatch): Promise<ModelStatic[]> {\n  if (Array.isArray(globPaths)) {\n    const promises: Array<Promise<ModelStatic[]>> = [];\n\n    for (const globPath of globPaths) {\n      promises.push(importModels(globPath, modelMatch));\n    }\n\n    return uniq((await Promise.all(promises)).flat(1));\n  }\n\n  const promises: Array<Promise<ModelStatic[]>> = [];\n  for (const path of await glob(globPaths)) {\n    const url = pathToFileURL(path).href;\n    promises.push(importModelNoGlob(url, modelMatch));\n  }\n\n  return uniq((await Promise.all(promises)).flat(1));\n}\n\nasync function importModelNoGlob(url: string, modelMatch?: ModelMatch): Promise<ModelStatic[]> {\n  const module = await import(url);\n\n  return Object.keys(module)\n    .filter(exportName => {\n      if (!isModelStatic(module[exportName])) {\n        return false;\n      }\n\n      if (modelMatch) {\n        return modelMatch(url, exportName, module[exportName]);\n      }\n\n      return true;\n    })\n    .map(exportName => module[exportName]);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA8B;AAC9B,uBAAiB;AACjB,kBAAiB;AAEjB,yBAA8B;AAW9B,eAAsB,aAAa,WAA8B,YAAiD;AAChH,MAAI,MAAM,QAAQ,SAAS,GAAG;AAC5B,UAAMA,YAA0C,CAAC;AAEjD,eAAW,YAAY,WAAW;AAChC,MAAAA,UAAS,KAAK,aAAa,UAAU,UAAU,CAAC;AAAA,IAClD;AAEA,eAAO,YAAAC,UAAM,MAAM,QAAQ,IAAID,SAAQ,GAAG,KAAK,CAAC,CAAC;AAAA,EACnD;AAEA,QAAM,WAA0C,CAAC;AACjD,aAAW,QAAQ,UAAM,iBAAAE,SAAK,SAAS,GAAG;AACxC,UAAM,UAAM,+BAAc,IAAI,EAAE;AAChC,aAAS,KAAK,kBAAkB,KAAK,UAAU,CAAC;AAAA,EAClD;AAEA,aAAO,YAAAD,UAAM,MAAM,QAAQ,IAAI,QAAQ,GAAG,KAAK,CAAC,CAAC;AACnD;AAEA,eAAe,kBAAkB,KAAa,YAAiD;AAC7F,QAAME,UAAS,MAAM,OAAO;AAE5B,SAAO,OAAO,KAAKA,OAAM,EACtB,OAAO,gBAAc;AACpB,QAAI,KAAC,kCAAcA,QAAO,UAAU,CAAC,GAAG;AACtC,aAAO;AAAA,IACT;AAEA,QAAI,YAAY;AACd,aAAO,WAAW,KAAK,YAAYA,QAAO,UAAU,CAAC;AAAA,IACvD;AAEA,WAAO;AAAA,EACT,CAAC,EACA,IAAI,gBAAcA,QAAO,UAAU,CAAC;AACzC;",
  "names": ["promises", "uniq", "glob", "module"]
}
